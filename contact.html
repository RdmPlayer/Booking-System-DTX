<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact Us</title>
  <link rel="stylesheet" href="style3.css">

  <script>
    // Load shared responsive CSS
    async function loadResponsiveStyle() {
      try {
        const res = await fetch('responsive-style.html');
        const html = await res.text();
        const fragment = document.createRange().createContextualFragment(html);
        document.head.appendChild(fragment);
      } catch (err) {
        console.error('Failed to load responsive-style.html:', err);
      }
    }
    loadResponsiveStyle();
  </script>
</head>

<body>
  <!-- Navbar -->
  <div id="navbar"></div>

  <!-- Back Button -->
  <div class="back-button" role="button" aria-label="Go Back" tabindex="0"
       onclick="history.back()"
       onkeydown="if(event.key === 'Enter' || event.key === ' ') history.back();">
  </div>

  <!-- Contact Content Wrapper -->
  <div class="contact-wrapper" style="visibility:hidden;">
    <main class="contact-container">
      <h1>Contact Us</h1>
      <p>Have questions or need support? Reach out to us!</p>

      <section>
        <h2>Staff Members</h2>
        <p>If you wish to contact a staff member, you may contact reception at 
          <a href="tel:+6478540010">+6478540010</a>
        </p>

        <h2>Address</h2>
        <p>
          <a href="https://www.google.com/maps/place/1+Micah+Place,+Rototuna,+Hamilton,+3210" target="_blank">
            1 Micah Place, Rototuna, Hamilton, 3210
          </a>
        </p>
      </section>
    </main>
  </div>

  <script>
    async function loadNavbar() {
      const response = await fetch('navbar.html');
      if (response.ok) {
        const navbarElement = document.getElementById('navbar');
        navbarElement.innerHTML = await response.text();
        attachNavbarEvents();

        // Wait for the full page load to ensure all fonts/images in navbar are rendered
        window.addEventListener('load', () => {
          const navbarHeight = navbarElement.offsetHeight;
          const wrapper = document.querySelector('.contact-wrapper');
          wrapper.style.paddingTop = navbarHeight + 'px';
          wrapper.style.visibility = 'visible'; // show content after layout
        });
      } else {
        console.error('Failed to load navbar:', response.status);
      }
    }

    function attachNavbarEvents() {
      document.getElementById('contactBtn')?.addEventListener('click', () => {
        alert('Contact us at contact@school.edu or call 123-456-7890');
      });

      document.getElementById('accessibilityBtn')?.addEventListener('click', () => {
        document.body.classList.toggle('high-contrast');
      });
    }

    loadNavbar();

    // Recalculate padding if window is resized
    window.addEventListener('resize', () => {
      const navbarHeight = document.getElementById('navbar').offsetHeight;
      const wrapper = document.querySelector('.contact-wrapper');
      wrapper.style.paddingTop = navbarHeight + 'px';
    });
  </script>
</body>
</html>
