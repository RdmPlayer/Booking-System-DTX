<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>B-Block Rooms</title>
<link rel="stylesheet" href="style1.css">
<script>
  // Load shared responsive CSS
  async function loadResponsiveStyle() {
    try {
      const res = await fetch('responsive-style.html');
      const html = await res.text();
      const fragment = document.createRange().createContextualFragment(html);
      document.head.appendChild(fragment);
    } catch (err) {
      console.error('Failed to load responsive-style.html:', err);
    }
  }
  loadResponsiveStyle();
</script>
</head>
<body>

<!-- Navbar -->
<div id="navbar"></div>

<!-- Back Button -->
<div class="back-button" role="button" aria-label="Go Back" tabindex="0"
     onclick="history.back()"
     onkeydown="if(event.key === 'Enter' || event.key === ' ') history.back();">
</div>

<!-- Main Wrapper -->
<div class="block-wrapper">
  <div class="container">
    <!-- Left Panel: Buttons -->
    <div class="left-panel">
      <h2>Select a Room in B-Block</h2>
      <div class="button-group">
        <button onclick="window.location.href='calendar.html?room=B1'">B1</button>
        <button onclick="window.location.href='calendar.html?room=B2'">B2</button>
        <button onclick="window.location.href='calendar.html?room=B3'">B3</button>
        <button onclick="window.location.href='calendar.html?room=B4'">B4</button>
        <button onclick="window.location.href='calendar.html?room=B5'">B5</button>
      </div>
    </div>

    <!-- Right Panel: Image Carousel -->
    <div class="right-panel">
      <div class="carousel">
        <div class="carousel-slide">
          <button class="carousel-button left" onclick="prevImage()">&#10094;</button>
          <img src="https://raw.githubusercontent.com/RdmPlayer/Booking-System/main/b1a.jpg" class="active" alt="B1">
          <img src="b2a.jpg" alt="B2">
          <img src="b3a.jpg" alt="B3">
          <img src="b4a.jpg" alt="B4">
          <img src="b5a.jpg" alt="B5">
          <button class="carousel-button right" onclick="nextImage()">&#10095;</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Carousel JS -->
<script>
  const images = document.querySelectorAll('.carousel-slide img');
  let currentIndex = 0;

  function showImage(index) {
    images.forEach((img, i) => {
      img.classList.toggle('active', i === index);
    });
  }

  function prevImage() {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    showImage(currentIndex);
  }

  function nextImage() {
    currentIndex = (currentIndex + 1) % images.length;
    showImage(currentIndex);
  }
</script>

<!-- Navbar JS -->
<script>
  async function loadNavbar() {
    const response = await fetch('navbar.html');
    if (response.ok) {
      const navbarElement = document.getElementById('navbar');
      navbarElement.innerHTML = await response.text();
      attachNavbarEvents();

      // Wait until full page load to ensure images/fonts in navbar are loaded
      window.addEventListener('load', () => {
        const navbarHeight = navbarElement.offsetHeight;
        const wrapper = document.querySelector('.block-wrapper');
        wrapper.style.paddingTop = navbarHeight + 'px';
        wrapper.style.visibility = 'visible'; // show content after layout
      });
    } else {
      console.error('Failed to load navbar:', response.status);
    }
  }

  function attachNavbarEvents() {
    document.getElementById('contactBtn')?.addEventListener('click', () => {
      alert('Contact us at contact@school.edu or call 123-456-7890');
    });

    document.getElementById('accessibilityBtn')?.addEventListener('click', () => {
      document.body.classList.toggle('high-contrast');
    });
  }

  loadNavbar();

  // Recalculate padding on window resize
  window.addEventListener('resize', () => {
    const navbarHeight = document.getElementById('navbar').offsetHeight;
    const wrapper = document.querySelector('.block-wrapper');
    wrapper.style.paddingTop = navbarHeight + 'px';
  });
</script>

</body>
</html>
